@Library('a42-jenkins-general-library') _

pipeline {
    agent  any

    stages {
        stage ('GIT VERSION - registerEnvVariables') {
            steps {
                script {
                    gitversion.registerEnvVariables(".", "./.gitversion")
                    env.GITVERSION_REGISTERED = sh(returnStdout: true, script: "date -u +'%Y-%m-%dT%H:%M:%SZ'").trim()
                }
                buildName "${env.FullSemVer}"
            }
        }
        stage ('Test pytest') {
            steps {
                sh '''
                    pytest
                '''
            }
        }
    }
}